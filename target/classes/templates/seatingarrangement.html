<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/jquery-ui.js"></script>
    <title>Document</title>
    <style>
        h3 {
            border: 2px solid gray;
            border-radius: 5px;
            padding: 5px;
            white-space: nowrap;
            z-index: 2;
        }
        .container-fluid{
            position: absolute;
            bottom: 0px;
            top: 0px;
            left: 0px;
            right: 0px;

        }
        .row{
            position: relative;
            height: 100%;
        }
        .tools{
            background-color:#A5C663;
            position: absolute;
            top: 0px;
            bottom: 0px;
            z-index: 2;
        }

        .tables{
            background-color: pink;
            position: absolute;
            border-radius: 100%;


        }


        .canvas{
            background-color:  rgb(219, 210, 210);
            overflow:hidden;
            position: absolute;
            bottom: 0px;
            top: 0px;
            right: 0px;
        }
        .objects {
            display:inline-block;
            background-color: #FFF3CC;
            border: #DFBC6A 1px solid;
            width: 50px;
            height: 50px;
            margin: 10px;
            padding: 8px;
            font-size: 18px;
            text-align: center;
            box-shadow: 2px 2px 2px #999;
            cursor: move;
        }
        #drop_zone{
            background-color: lavenderblush;
            border: #999 1px solid;
            width: 280px;
            height: 200px;
            padding: 8px;
            font-size: 18px;
        }
        #drop_zone_table{
            background-color: lavenderblush;
            border: #999 1px solid;
            border-radius: 50%;
            width: 280px;
            height: 200px;
            padding: 8px;
            font-size: 18px;
        }


    </style>
    <script>
        $(init);
        function init() {
            var diagram = [];
            var canvas = $(".canvas");
            var tools =$(".tools");
            var tables =$(".tables");
            $(".tool").draggable({
                helper:"clone"
            });
            $(".tables").draggable({
                helper:"clone"
            });
            canvas.droppable({
                drop: function(event, ui){

                    var node= {
                        _id: (new Date).getTime(),
                        position: ui.helper.position()
                    };
                    node.position.left -= canvas.position().left;
                    if (ui.helper.hasClass("tool-1")){
                        node.type="TOOL-1";
                    }else if (ui.helper.hasClass("tool-2")){
                        node.type="TOOL-2";
                    } else if (ui.helper.hasClass("Table-1")){
                        node.type="Table-1";
                    } else {
                        return;
                    }
                    diagram.push(node);
                    renderDiagram(diagram);
                }
            });
            function renderDiagram(diagram){
                canvas.empty();
                for (var d in diagram){
                    var node= diagram[d];
                    var html="";
                    if(node.type === "TOOL-1"){
                        html="<h3>TOOL 1</h3>";
                    } else  if(node.type === "TOOL-2"){
                        html="<h3>TOOL 2</h3>";
                    } else  if(node.type === "Table-1"){
                        html="<h3>Table 1</h3>";
                    }
                    var dom= $(html).css({
                        "position": "absolute",
                        "top": node.position.top,
                        "left": node.position.left
                    }).draggable({

                        stop: function(event, ui){
                            console.log(ui);
                            var id = ui.helper.attr("id");
                            for (var i in diagram) {
                                if (diagram[i]._id == id){
                                    diagram[i].position.top = ui.position.top;
                                    diagram[i].position.left = ui.position.left;
                                }
                            }
                        }
                    }).attr("id", node._id);
                    canvas.append(dom);
                }
            }
        }
    </script>
</head>
<body>
<div class="container-fluid">
    <h1>Drag and Drop Tools Onto Canvas</h1>
    <div class="row">
        <div class="col-xs-3 tools" >
            <h2>Tools</h2>
            <h3 class="tool tool-1">Tool 1</h3>
            <h3 class="tool tool-2">Tool 2</h3>
            <h3 class="tables Table-1">Table 1</h3>
        </div>
        <div class="col-xs-9 canvas">
            <h2>Canvas</h2>
        </div>
    </div>
</div>

<div id="drop_zone" ondragenter="drag_enter(event)" ondrop="drag_drop(event)" ondragover="return false" ondragleave="drag_leave(event)"></div>
<div id="object1" class="objects" draggable="true" ondragstart="drag_start(event)" ondragend="drag_end(event)" >object 1</div>
<div id="object2" class="objects" draggable="true" ondragstart="drag_start(event)" ondragend="drag_end(event)" >object 2</div>
<div id="object3" class="objects" draggable="true" ondragstart="drag_start(event)" ondragend="drag_end(event)" >object 3</div>
<hr>
<button onclick="readDropZone()">Get Object Data</button>

</body>
</html>